"use strict";(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[988],{5988:(dt,_,r)=>{r.r(_),r.d(_,{AppModule:()=>bt});var l=r(6019),d=r(4522),u=r(9010),Z=r(5956),a=r(828),t=r(865);let v=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-root"]],decls:8,vars:0,consts:[[1,"ui","menu"],["routerLink","home","routerLinkActive","active",1,"item"],["routerLink","books","routerLinkActive","active",1,"item"],["routerLink","admin","routerLinkActive","active",1,"item"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"a",1),t._uU(2,"Home"),t.qZA(),t.TgZ(3,"a",2),t._uU(4,"B\xfccher"),t.qZA(),t.TgZ(5,"a",3),t._uU(6,"Administration"),t.qZA(),t.qZA(),t._UZ(7,"router-outlet"))},directives:[a.yS,a.Od,a.lC],styles:[""]}),e})();var F=r(8095),y=r(8735),x=r(3181),U=r(5389),T=r(5722),A=r(9204),q=r(540),h=r(921),p=r(8053),c=r(2047);class g{static fromRaw(n){return Object.assign(Object.assign({},n),{published:new Date(n.published)})}}let m=(()=>{class e{constructor(o){this.http=o,this.api="https://api4.angular-buch.com/secure"}getAll(){return this.http.get(`${this.api}/books`).pipe((0,h.X)(3),(0,p.U)(o=>o.map(i=>g.fromRaw(i))),(0,c.K)(this.errorHandler))}getSingle(o){return this.http.get(`${this.api}/book/${o}`).pipe((0,h.X)(3),(0,p.U)(i=>g.fromRaw(i)),(0,c.K)(this.errorHandler))}create(o){return this.http.post(`${this.api}/book`,o,{responseType:"text"}).pipe((0,c.K)(this.errorHandler))}update(o){return this.http.put(`${this.api}/book/${o.isbn}`,o,{responseType:"text"}).pipe((0,c.K)(this.errorHandler))}remove(o){return this.http.delete(`${this.api}/book/${o}`,{responseType:"text"}).pipe((0,c.K)(this.errorHandler))}getAllSearch(o){return this.http.get(`${this.api}/books/search/${o}`).pipe((0,h.X)(3),(0,p.U)(i=>i.map(s=>g.fromRaw(s))),(0,c.K)(this.errorHandler))}check(o){return this.http.get(`${this.api}/book/${o}/check`).pipe((0,c.K)(this.errorHandler))}errorHandler(o){return console.error("Fehler aufgetreten!"),(0,q._)(o)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(d.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const N=function(e){return["..","books",e]};function I(e,n){if(1&e&&(t.TgZ(0,"a",8),t._uU(1),t.TgZ(2,"p",9),t._uU(3),t.qZA(),t.qZA()),2&e){const o=n.$implicit;t.Q6J("routerLink",t.VKq(3,N,o.isbn)),t.xp6(1),t.hij(" ",o.title," "),t.xp6(2),t.Oqu(o.subtitle)}}function O(e,n){if(1&e&&(t.TgZ(0,"div",6),t.YNc(1,I,4,5,"a",7),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngForOf",o.foundBooks)}}let J=(()=>{class e{constructor(o){this.bs=o,this.keyUp$=new F.xQ,this.isLoading=!1,this.foundBooks=[]}ngOnInit(){this.keyUp$.pipe((0,y.h)(o=>o.length>=3),(0,x.b)(500),(0,U.x)(),(0,T.b)(()=>this.isLoading=!0),(0,A.w)(o=>this.bs.getAllSearch(o)),(0,T.b)(()=>this.isLoading=!1)).subscribe(o=>this.foundBooks=o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-search"]],decls:6,vars:3,consts:[[1,"ui","search"],[1,"ui","icon","input"],["type","text",1,"prompt",3,"keyup"],["input",""],[1,"search","icon"],["class","results transition visible",4,"ngIf"],[1,"results","transition","visible"],["class","result",3,"routerLink",4,"ngFor","ngForOf"],[1,"result",3,"routerLink"],[1,"description"]],template:function(o,i){if(1&o){const s=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"input",2,3),t.NdJ("keyup",function(){t.CHM(s);const f=t.MAs(3);return i.keyUp$.next(f.value)}),t.qZA(),t._UZ(4,"i",4),t.qZA(),t.YNc(5,O,2,1,"div",5),t.qZA()}2&o&&(t.ekj("loading",i.isLoading),t.xp6(5),t.Q6J("ngIf",i.foundBooks.length))},directives:[l.O5,l.sg,a.yS],styles:[""]}),e})(),w=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-home"]],decls:10,vars:0,consts:[["routerLink","../books",1,"ui","red","button"],[1,"right","arrow","icon"]],template:function(o,i){1&o&&(t.TgZ(0,"h1"),t._uU(1,"Home"),t.qZA(),t.TgZ(2,"p"),t._uU(3,"Das ist der BookMonkey."),t.qZA(),t.TgZ(4,"a",0),t._uU(5," Buchliste ansehen "),t._UZ(6,"i",1),t.qZA(),t.TgZ(7,"h2"),t._uU(8,"Suche"),t.qZA(),t._UZ(9,"bm-search"))},directives:[a.yS,J],styles:[""]}),e})();function L(e,n){if(1&e&&t._UZ(0,"img",7),2&e){const o=t.oxw(2);t.Q6J("src",o.book.thumbnails[0].url,t.LSH)}}function S(e,n){if(1&e&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Oqu(o.book.subtitle)}}function M(e,n){1&e&&(t.TgZ(0,"span"),t._uU(1,", "),t.qZA())}function Y(e,n){if(1&e&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,M,2,0,"span",0),t.qZA()),2&e){const o=n.$implicit,i=n.last;t.xp6(1),t.hij(" ",o,""),t.xp6(1),t.Q6J("ngIf",!i)}}function Q(e,n){if(1&e&&(t.ynx(0),t.YNc(1,L,1,1,"img",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t.YNc(5,S,2,1,"div",4),t.TgZ(6,"div",5),t.YNc(7,Y,3,2,"span",6),t._UZ(8,"br"),t._uU(9),t.qZA(),t.qZA(),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.book.thumbnails&&o.book.thumbnails[0]&&o.book.thumbnails[0].url),t.xp6(3),t.Oqu(o.book.title),t.xp6(1),t.Q6J("ngIf",o.book.subtitle),t.xp6(2),t.Q6J("ngForOf",o.book.authors),t.xp6(2),t.hij(" ISBN ",o.book.isbn," ")}}let E=(()=>{class e{ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[[4,"ngIf"],["class","ui tiny image",3,"src",4,"ngIf"],[1,"content"],[1,"header"],["class","description",4,"ngIf"],[1,"metadata"],[4,"ngFor","ngForOf"],[1,"ui","tiny","image",3,"src"],[1,"description"]],template:function(o,i){1&o&&t.YNc(0,Q,10,5,"ng-container",0),2&o&&t.Q6J("ngIf",i.book)},directives:[l.O5,l.sg],styles:[""]}),e})();function R(e,n){if(1&e&&t._UZ(0,"bm-book-list-item",4),2&e){const o=n.$implicit;t.Q6J("book",o)("routerLink",o.isbn)}}function $(e,n){1&e&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t._uU(2,"Daten werden geladen..."),t.qZA(),t.qZA())}function H(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"Es wurden noch keine B\xfccher eingetragen."),t.qZA())}let D=(()=>{class e{constructor(o){this.bs=o,this.books=[]}ngOnInit(){this.bs.getAll().subscribe(o=>this.books=o)}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-book-list"]],decls:4,vars:3,consts:[[1,"ui","middle","aligned","selection","divided","list"],["class","item",3,"book","routerLink",4,"ngFor","ngForOf"],["class","ui active dimmer",4,"ngIf"],[4,"ngIf"],[1,"item",3,"book","routerLink"],[1,"ui","active","dimmer"],[1,"ui","large","text","loader"]],template:function(o,i){1&o&&(t.TgZ(0,"div",0),t.YNc(1,R,1,2,"bm-book-list-item",1),t.YNc(2,$,3,0,"div",2),t.YNc(3,H,2,0,"p",3),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",i.books),t.xp6(1),t.Q6J("ngIf",!i.books),t.xp6(1),t.Q6J("ngIf",i.books&&!i.books.length))},directives:[l.sg,l.O5,E,a.rH],styles:[""]}),e})();function j(e,n){if(1&e&&(t.TgZ(0,"h3"),t._uU(1),t.qZA()),2&e){const o=t.oxw(2);t.xp6(1),t.Oqu(o.book.subtitle)}}function V(e,n){if(1&e&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o,"")}}function X(e,n){1&e&&t._UZ(0,"i",15)}function z(e,n){if(1&e&&(t.TgZ(0,"div",5),t.TgZ(1,"h4"),t._uU(2,"Rating"),t.qZA(),t.YNc(3,X,1,0,"i",14),t.qZA()),2&e){const o=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",o.getRating(o.book.rating))}}function K(e,n){1&e&&t._UZ(0,"img",16),2&e&&t.Q6J("src",n.$implicit.url,t.LSH)}const G=function(e){return["../../admin/edit",e]};function P(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"h1"),t._uU(2),t.qZA(),t.YNc(3,j,2,1,"h3",2),t._UZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"h4"),t._uU(8,"Autoren"),t.qZA(),t.YNc(9,V,3,1,"ng-container",6),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"h4"),t._uU(12,"ISBN"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"h4"),t._uU(16,"Erschienen"),t.qZA(),t._uU(17),t.qZA(),t.YNc(18,z,4,1,"div",7),t.qZA(),t.TgZ(19,"h4"),t._uU(20,"Beschreibung"),t.qZA(),t.TgZ(21,"p"),t._uU(22),t.qZA(),t.TgZ(23,"div",8),t.YNc(24,K,1,1,"img",9),t.qZA(),t.TgZ(25,"button",10),t.NdJ("click",function(){return t.CHM(o),t.oxw().removeBook()}),t._UZ(26,"i",11),t._uU(27," Buch l\xf6schen "),t.qZA(),t.TgZ(28,"a",12),t._UZ(29,"i",13),t._uU(30," Buch bearbeiten "),t.qZA(),t.qZA()}if(2&e){const o=t.oxw();t.xp6(2),t.Oqu(o.book.title),t.xp6(1),t.Q6J("ngIf",o.book.subtitle),t.xp6(6),t.Q6J("ngForOf",o.book.authors),t.xp6(4),t.hij(" ",o.book.isbn," "),t.xp6(4),t.hij(" ",o.book.published," "),t.xp6(1),t.Q6J("ngIf",o.book.rating),t.xp6(4),t.Oqu(o.book.description),t.xp6(2),t.Q6J("ngForOf",o.book.thumbnails),t.xp6(4),t.Q6J("routerLink",t.VKq(9,G,o.book.isbn))}}function W(e,n){1&e&&t._UZ(0,"div",17)}let tt=(()=>{class e{constructor(o,i,s){this.bs=o,this.router=i,this.route=s}ngOnInit(){this.bs.getSingle(this.route.snapshot.paramMap.get("isbn")||"").subscribe(i=>this.book=i)}getRating(o){return new Array(o)}removeBook(){this.book&&confirm("Buch wirklich l\xf6schen?")&&this.bs.remove(this.book.isbn).subscribe(o=>this.router.navigate(["../"],{relativeTo:this.route}))}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m),t.Y36(a.F0),t.Y36(a.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-book-details"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],[1,"ui","divider"],[1,"ui","grid"],[1,"four","wide","column"],[4,"ngFor","ngForOf"],["class","four wide column",4,"ngIf"],[1,"ui","small","images"],[3,"src",4,"ngFor","ngForOf"],[1,"ui","tiny","red","labeled","icon","button",3,"click"],[1,"remove","icon"],[1,"ui","tiny","yellow","labeled","icon","button",3,"routerLink"],[1,"write","icon"],["class","yellow star icon",4,"ngFor","ngForOf"],[1,"yellow","star","icon"],[3,"src"],[1,"ui","active","centered","inline","loader"]],template:function(o,i){if(1&o&&(t.YNc(0,P,31,11,"div",0),t.YNc(1,W,1,0,"ng-template",null,1,t.W1O)),2&o){const s=t.MAs(2);t.Q6J("ngIf",i.book)("ngIfElse",s)}},directives:[l.O5,l.sg,a.yS],styles:["p[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),e})();class B{static isbnFormat(n){if(!n.value)return null;const o=n.value.replace(/-/g,"");return/(^\d{10}$)|(^\d{13}$)/.test(o)?null:{isbnFormat:{valid:!1}}}static atLeastOneAuthor(n){return n.controls.some(o=>o.value)?null:{atLeastOneAuthor:{valid:!1}}}}var ot=r(2411);let et=(()=>{class e{constructor(o){this.bs=o}validate(o){return this.bs.check(o.value).pipe((0,p.U)(i=>!1===i?null:{isbnExists:{valid:!1}}),(0,c.K)(()=>(0,ot.of)(null)))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(m))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function nt(e,n){if(1&e&&(t.TgZ(0,"div",1),t._uU(1),t.qZA()),2&e){const o=n.$implicit;t.xp6(1),t.hij(" ",o,"\n")}}let it=(()=>{class e{constructor(){this.allMessages={title:{required:"Ein Buchtitel muss angegeben werden."},isbn:{required:"Es muss eine ISBN angegeben werden.",isbnFormat:"Die ISBN muss aus 10 oder 13 Zeichen bestehen.",isbnExists:"Die ISBN existiert bereits."},published:{required:"Es muss ein Erscheinungsdatum angegeben werden."},authors:{atLeastOneAuthor:"Es muss ein Autor angegeben werden."}}}ngOnInit(){}errorsForControl(){const o=this.allMessages[this.controlName];return this.control&&this.control.errors&&o&&this.control.dirty?Object.keys(this.control.errors).map(i=>o[i]):[]}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-form-messages"]],inputs:{control:"control",controlName:"controlName"},decls:1,vars:1,consts:[["class","ui negative message",4,"ngFor","ngForOf"],[1,"ui","negative","message"]],template:function(o,i){1&o&&t.YNc(0,nt,2,1,"div",0),2&o&&t.Q6J("ngForOf",i.errorsForControl())},directives:[l.sg],styles:[""]}),e})();function st(e,n){if(1&e&&(t.TgZ(0,"div",16),t._UZ(1,"input",17),t.qZA()),2&e){const o=n.index;t.xp6(1),t.Q6J("formControlName",o)}}function rt(e,n){1&e&&(t.TgZ(0,"div",18),t.TgZ(1,"div",19),t._UZ(2,"input",20),t.qZA(),t.TgZ(3,"div",21),t._UZ(4,"input",22),t.qZA(),t.qZA()),2&e&&t.Q6J("formGroupName",n.index)}let C=(()=>{class e{constructor(o,i){this.fb=o,this.bookExistsValidator=i,this.submitBook=new t.vpe,this.bookForm=this.fb.group({title:["",u.kI.required],subtitle:[""],isbn:["",[u.kI.required,B.isbnFormat],s=>this.bookExistsValidator.validate(s)],description:[""],authors:this.buildAuthorsArray([""]),thumbnails:this.buildThumbnailsArray([{title:"",url:""}]),published:[new Date,[u.kI.required]]})}set editing(o){const i=this.bookForm.get("isbn");o?(i.clearAsyncValidators(),i.disable()):(i.setAsyncValidators(s=>this.bookExistsValidator.validate(s)),i.enable())}ngOnInit(){}ngOnChanges(){this.book&&this.setFormValues(this.book)}setFormValues(o){this.bookForm.patchValue(o),this.bookForm.setControl("authors",this.buildAuthorsArray(o.authors)),o.thumbnails&&this.bookForm.setControl("thumbnails",this.buildThumbnailsArray(o.thumbnails))}buildAuthorsArray(o){return this.fb.array(o,B.atLeastOneAuthor)}buildThumbnailsArray(o){return this.fb.array(o.map(i=>this.fb.group(i)))}get authors(){return this.bookForm.get("authors")}get thumbnails(){return this.bookForm.get("thumbnails")}addAuthorControl(){this.authors.push(this.fb.control(""))}addThumbnailControl(){this.thumbnails.push(this.fb.group({url:"",title:""}))}submitForm(){const o=this.bookForm.value,i=o.authors.filter(k=>k),s=o.thumbnails.filter(k=>k.url),b=this.book?this.book.isbn:o.isbn,f=Object.assign(Object.assign({},o),{isbn:b,authors:i,thumbnails:s});this.submitBook.emit(f),this.bookForm.reset()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(u.qu),t.Y36(et))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-book-form"]],inputs:{book:"book",editing:"editing"},outputs:{submitBook:"submitBook"},features:[t.TTD],decls:34,vars:8,consts:[[1,"ui","form",3,"formGroup","ngSubmit"],["formControlName","title"],["controlName","title",3,"control"],["formControlName","subtitle"],["formControlName","isbn"],["controlName","isbn",3,"control"],["type","date","useValueAsDate","","formControlName","published"],["controlName","published",3,"control"],["type","button",1,"ui","mini","button",3,"click"],["formArrayName","authors",1,"fields"],["class","sixteen wide field",4,"ngFor","ngForOf"],["controlName","authors",3,"control"],["formControlName","description"],["formArrayName","thumbnails"],["class","fields",3,"formGroupName",4,"ngFor","ngForOf"],["type","submit",1,"ui","button",3,"disabled"],[1,"sixteen","wide","field"],["placeholder","Autor",3,"formControlName"],[1,"fields",3,"formGroupName"],[1,"nine","wide","field"],["placeholder","URL","formControlName","url"],[1,"seven","wide","field"],["placeholder","Titel","formControlName","title"]],template:function(o,i){1&o&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return i.submitForm()}),t.TgZ(1,"label"),t._uU(2,"Buchtitel"),t.qZA(),t._UZ(3,"input",1),t._UZ(4,"bm-form-messages",2),t.TgZ(5,"label"),t._uU(6,"Untertitel"),t.qZA(),t._UZ(7,"input",3),t.TgZ(8,"label"),t._uU(9,"ISBN"),t.qZA(),t._UZ(10,"input",4),t._UZ(11,"bm-form-messages",5),t.TgZ(12,"label"),t._uU(13,"Erscheinungsdatum"),t.qZA(),t._UZ(14,"input",6),t._UZ(15,"bm-form-messages",7),t.TgZ(16,"label"),t._uU(17,"Autoren"),t.qZA(),t.TgZ(18,"button",8),t.NdJ("click",function(){return i.addAuthorControl()}),t._uU(19," + Autor "),t.qZA(),t.TgZ(20,"div",9),t.YNc(21,st,2,1,"div",10),t.qZA(),t._UZ(22,"bm-form-messages",11),t.TgZ(23,"label"),t._uU(24,"Beschreibung"),t.qZA(),t._UZ(25,"textarea",12),t.TgZ(26,"label"),t._uU(27,"Bilder"),t.qZA(),t.TgZ(28,"button",8),t.NdJ("click",function(){return i.addThumbnailControl()}),t._uU(29," + Bild "),t.qZA(),t.TgZ(30,"div",13),t.YNc(31,rt,5,1,"div",14),t.qZA(),t.TgZ(32,"button",15),t._uU(33," Speichern "),t.qZA(),t.qZA()),2&o&&(t.Q6J("formGroup",i.bookForm),t.xp6(4),t.Q6J("control",i.bookForm.get("title")),t.xp6(7),t.Q6J("control",i.bookForm.get("isbn")),t.xp6(4),t.Q6J("control",i.bookForm.get("published")),t.xp6(6),t.Q6J("ngForOf",i.authors.controls),t.xp6(1),t.Q6J("control",i.bookForm.get("authors")),t.xp6(9),t.Q6J("ngForOf",i.thumbnails.controls),t.xp6(1),t.Q6J("disabled",i.bookForm.invalid))},directives:[u._Y,u.JL,u.sg,u.Fj,u.JJ,u.u,it,Z.hR,u.CE,l.sg,u.x0],styles:[""]}),e})();function ut(e,n){if(1&e){const o=t.EpF();t.TgZ(0,"bm-book-form",1),t.NdJ("submitBook",function(s){return t.CHM(o),t.oxw().updateBook(s)}),t.qZA()}if(2&e){const o=t.oxw();t.Q6J("book",o.book)("editing",!0)}}const ct=[{path:"",component:v,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:w},{path:"books",component:D},{path:"books/:isbn",component:tt},{path:"admin",redirectTo:"admin/create",pathMatch:"full"},{path:"admin/create",component:(()=>{class e{constructor(o,i,s){this.bs=o,this.route=i,this.router=s}ngOnInit(){}createBook(o){this.bs.create(o).subscribe(()=>{this.router.navigate(["../..","books"],{relativeTo:this.route})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m),t.Y36(a.gz),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-create-book"]],decls:3,vars:0,consts:[[3,"submitBook"]],template:function(o,i){1&o&&(t.TgZ(0,"h1"),t._uU(1,"Buch hinzuf\xfcgen"),t.qZA(),t.TgZ(2,"bm-book-form",0),t.NdJ("submitBook",function(b){return i.createBook(b)}),t.qZA())},directives:[C],styles:[""]}),e})()},{path:"admin/edit/:isbn",component:(()=>{class e{constructor(o,i,s){this.bs=o,this.route=i,this.router=s}ngOnInit(){this.route.paramMap.pipe((0,p.U)(o=>o.get("isbn")||""),(0,A.w)(o=>this.bs.getSingle(o))).subscribe(o=>this.book=o)}updateBook(o){this.bs.update(o).subscribe(()=>{this.router.navigate(["../../..","books",o.isbn],{relativeTo:this.route})})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(m),t.Y36(a.gz),t.Y36(a.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["bm-edit-book"]],decls:3,vars:1,consts:[[3,"book","editing","submitBook",4,"ngIf"],[3,"book","editing","submitBook"]],template:function(o,i){1&o&&(t.TgZ(0,"h1"),t._uU(1,"Buch bearbeiten"),t.qZA(),t.YNc(2,ut,1,2,"bm-book-form",0)),2&o&&(t.xp6(2),t.Q6J("ngIf",i.book))},directives:[l.O5,C],styles:[""]}),e})()}]}];let mt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[a.Bz.forChild(ct)],a.Bz]}),e})(),pt=(()=>{class e{constructor(){this.authToken="1234567890"}intercept(o,i){const s=o.clone({setHeaders:{Authorization:`Bearer ${this.authToken}`}});return i.handle(s)}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),bt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e,bootstrap:[v]}),e.\u0275inj=t.cJS({providers:[{provide:d.TP,useClass:pt,multi:!0}],imports:[[l.ez,d.JF,mt,u.UX,Z.B_]]}),e})()}}]);