"use strict";(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[457],{5457:(V,h,s)=>{s.r(h),s.d(h,{AppModule:()=>P});var p=s(6019),a=s(4522),r=s(828),t=s(865);let f=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bm-root"]],decls:6,vars:0,consts:[[1,"ui","menu"],["routerLink","home","routerLinkActive","active",1,"item"],["routerLink","books","routerLinkActive","active",1,"item"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"a",1),t._uU(2,"Home"),t.qZA(),t.TgZ(3,"a",2),t._uU(4,"B\xfccher"),t.qZA(),t.qZA(),t._UZ(5,"router-outlet"))},directives:[r.yS,r.Od,r.lC],styles:[""]}),o})();var _=s(8095),b=s(8735),v=s(3181),Z=s(5389),k=s(5722),T=s(9204),A=s(540),l=s(921),m=s(8053),u=s(2047);class g{static fromRaw(n){return Object.assign(Object.assign({},n),{published:new Date(n.published)})}}let d=(()=>{class o{constructor(e){this.http=e,this.api="https://api4.angular-buch.com/secure"}getAll(){return this.http.get(`${this.api}/books`).pipe((0,l.X)(3),(0,m.U)(e=>e.map(i=>g.fromRaw(i))),(0,u.K)(this.errorHandler))}getSingle(e){return this.http.get(`${this.api}/book/${e}`).pipe((0,l.X)(3),(0,m.U)(i=>g.fromRaw(i)),(0,u.K)(this.errorHandler))}remove(e){return this.http.delete(`${this.api}/book/${e}`,{responseType:"text"}).pipe((0,u.K)(this.errorHandler))}getAllSearch(e){return this.http.get(`${this.api}/books/search/${e}`).pipe((0,l.X)(3),(0,m.U)(i=>i.map(c=>g.fromRaw(c))),(0,u.K)(this.errorHandler))}errorHandler(e){return console.error("Fehler aufgetreten!"),(0,A._)(e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(a.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const x=function(o){return["..","books",o]};function C(o,n){if(1&o&&(t.TgZ(0,"a",8),t._uU(1),t.TgZ(2,"p",9),t._uU(3),t.qZA(),t.qZA()),2&o){const e=n.$implicit;t.Q6J("routerLink",t.VKq(3,x,e.isbn)),t.xp6(1),t.hij(" ",e.title," "),t.xp6(2),t.Oqu(e.subtitle)}}function B(o,n){if(1&o&&(t.TgZ(0,"div",6),t.YNc(1,C,4,5,"a",7),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.foundBooks)}}let y=(()=>{class o{constructor(e){this.bs=e,this.keyUp$=new _.xQ,this.isLoading=!1,this.foundBooks=[]}ngOnInit(){this.keyUp$.pipe((0,b.h)(e=>e.length>=3),(0,v.b)(500),(0,Z.x)(),(0,k.b)(()=>this.isLoading=!0),(0,T.w)(e=>this.bs.getAllSearch(e)),(0,k.b)(()=>this.isLoading=!1)).subscribe(e=>this.foundBooks=e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bm-search"]],decls:6,vars:3,consts:[[1,"ui","search"],[1,"ui","icon","input"],["type","text",1,"prompt",3,"keyup"],["input",""],[1,"search","icon"],["class","results transition visible",4,"ngIf"],[1,"results","transition","visible"],["class","result",3,"routerLink",4,"ngFor","ngForOf"],[1,"result",3,"routerLink"],[1,"description"]],template:function(e,i){if(1&e){const c=t.EpF();t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"input",2,3),t.NdJ("keyup",function(){t.CHM(c);const G=t.MAs(3);return i.keyUp$.next(G.value)}),t.qZA(),t._UZ(4,"i",4),t.qZA(),t.YNc(5,B,2,1,"div",5),t.qZA()}2&e&&(t.ekj("loading",i.isLoading),t.xp6(5),t.Q6J("ngIf",i.foundBooks.length))},directives:[p.O5,p.sg,r.yS],styles:[""]}),o})(),U=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bm-home"]],decls:10,vars:0,consts:[["routerLink","../books",1,"ui","red","button"],[1,"right","arrow","icon"]],template:function(e,i){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Home"),t.qZA(),t.TgZ(2,"p"),t._uU(3,"Das ist der BookMonkey."),t.qZA(),t.TgZ(4,"a",0),t._uU(5," Buchliste ansehen "),t._UZ(6,"i",1),t.qZA(),t.TgZ(7,"h2"),t._uU(8,"Suche"),t.qZA(),t._UZ(9,"bm-search"))},directives:[r.yS,y],styles:[""]}),o})();function I(o,n){if(1&o&&t._UZ(0,"img",7),2&o){const e=t.oxw(2);t.Q6J("src",e.book.thumbnails[0].url,t.LSH)}}function F(o,n){if(1&o&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.book.subtitle)}}function L(o,n){1&o&&(t.TgZ(0,"span"),t._uU(1,", "),t.qZA())}function q(o,n){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.YNc(2,L,2,0,"span",0),t.qZA()),2&o){const e=n.$implicit,i=n.last;t.xp6(1),t.hij(" ",e,""),t.xp6(1),t.Q6J("ngIf",!i)}}function O(o,n){if(1&o&&(t.ynx(0),t.YNc(1,I,1,1,"img",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t.YNc(5,F,2,1,"div",4),t.TgZ(6,"div",5),t.YNc(7,q,3,2,"span",6),t._UZ(8,"br"),t._uU(9),t.qZA(),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.book.thumbnails&&e.book.thumbnails[0]&&e.book.thumbnails[0].url),t.xp6(3),t.Oqu(e.book.title),t.xp6(1),t.Q6J("ngIf",e.book.subtitle),t.xp6(2),t.Q6J("ngForOf",e.book.authors),t.xp6(2),t.hij(" ISBN ",e.book.isbn," ")}}let M=(()=>{class o{ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[[4,"ngIf"],["class","ui tiny image",3,"src",4,"ngIf"],[1,"content"],[1,"header"],["class","description",4,"ngIf"],[1,"metadata"],[4,"ngFor","ngForOf"],[1,"ui","tiny","image",3,"src"],[1,"description"]],template:function(e,i){1&e&&t.YNc(0,O,10,5,"ng-container",0),2&e&&t.Q6J("ngIf",i.book)},directives:[p.O5,p.sg],styles:[""]}),o})();function S(o,n){if(1&o&&t._UZ(0,"bm-book-list-item",4),2&o){const e=n.$implicit;t.Q6J("book",e)("routerLink",e.isbn)}}function w(o,n){1&o&&(t.TgZ(0,"div",5),t.TgZ(1,"div",6),t._uU(2,"Daten werden geladen..."),t.qZA(),t.qZA())}function J(o,n){1&o&&(t.TgZ(0,"p"),t._uU(1,"Es wurden noch keine B\xfccher eingetragen."),t.qZA())}function N(o,n){if(1&o&&(t.TgZ(0,"h3"),t._uU(1),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Oqu(e.book.subtitle)}}function Q(o,n){if(1&o&&(t.ynx(0),t._uU(1),t._UZ(2,"br"),t.BQk()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e,"")}}function R(o,n){1&o&&t._UZ(0,"i",13)}function H(o,n){if(1&o&&(t.TgZ(0,"div",5),t.TgZ(1,"h4"),t._uU(2,"Rating"),t.qZA(),t.YNc(3,R,1,0,"i",12),t.qZA()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",e.getRating(e.book.rating))}}function D(o,n){1&o&&t._UZ(0,"img",14),2&o&&t.Q6J("src",n.$implicit.url,t.LSH)}function $(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"h1"),t._uU(2),t.qZA(),t.YNc(3,N,2,1,"h3",2),t._UZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"h4"),t._uU(8,"Autoren"),t.qZA(),t.YNc(9,Q,3,1,"ng-container",6),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"h4"),t._uU(12,"ISBN"),t.qZA(),t._uU(13),t.qZA(),t.TgZ(14,"div",5),t.TgZ(15,"h4"),t._uU(16,"Erschienen"),t.qZA(),t._uU(17),t.qZA(),t.YNc(18,H,4,1,"div",7),t.qZA(),t.TgZ(19,"h4"),t._uU(20,"Beschreibung"),t.qZA(),t.TgZ(21,"p"),t._uU(22),t.qZA(),t.TgZ(23,"div",8),t.YNc(24,D,1,1,"img",9),t.qZA(),t.TgZ(25,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().removeBook()}),t._UZ(26,"i",11),t._uU(27," Buch l\xf6schen "),t.qZA(),t.qZA()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.book.title),t.xp6(1),t.Q6J("ngIf",e.book.subtitle),t.xp6(6),t.Q6J("ngForOf",e.book.authors),t.xp6(4),t.hij(" ",e.book.isbn," "),t.xp6(4),t.hij(" ",e.book.published," "),t.xp6(1),t.Q6J("ngIf",e.book.rating),t.xp6(4),t.Oqu(e.book.description),t.xp6(2),t.Q6J("ngForOf",e.book.thumbnails)}}function j(o,n){1&o&&t._UZ(0,"div",15)}const E=[{path:"",component:f,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:U},{path:"books",component:(()=>{class o{constructor(e){this.bs=e,this.books=[]}ngOnInit(){this.bs.getAll().subscribe(e=>this.books=e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bm-book-list"]],decls:4,vars:3,consts:[[1,"ui","middle","aligned","selection","divided","list"],["class","item",3,"book","routerLink",4,"ngFor","ngForOf"],["class","ui active dimmer",4,"ngIf"],[4,"ngIf"],[1,"item",3,"book","routerLink"],[1,"ui","active","dimmer"],[1,"ui","large","text","loader"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,S,1,2,"bm-book-list-item",1),t.YNc(2,w,3,0,"div",2),t.YNc(3,J,2,0,"p",3),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",i.books),t.xp6(1),t.Q6J("ngIf",!i.books),t.xp6(1),t.Q6J("ngIf",i.books&&!i.books.length))},directives:[p.sg,p.O5,M,r.rH],styles:[""]}),o})()},{path:"books/:isbn",component:(()=>{class o{constructor(e,i,c){this.bs=e,this.router=i,this.route=c}ngOnInit(){this.bs.getSingle(this.route.snapshot.paramMap.get("isbn")||"").subscribe(i=>this.book=i)}getRating(e){return new Array(e)}removeBook(){this.book&&confirm("Buch wirklich l\xf6schen?")&&this.bs.remove(this.book.isbn).subscribe(e=>this.router.navigate(["../"],{relativeTo:this.route}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d),t.Y36(r.F0),t.Y36(r.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["bm-book-details"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],[1,"ui","divider"],[1,"ui","grid"],[1,"four","wide","column"],[4,"ngFor","ngForOf"],["class","four wide column",4,"ngIf"],[1,"ui","small","images"],[3,"src",4,"ngFor","ngForOf"],[1,"ui","tiny","red","labeled","icon","button",3,"click"],[1,"remove","icon"],["class","yellow star icon",4,"ngFor","ngForOf"],[1,"yellow","star","icon"],[3,"src"],[1,"ui","active","centered","inline","loader"]],template:function(e,i){if(1&e&&(t.YNc(0,$,28,8,"div",0),t.YNc(1,j,1,0,"ng-template",null,1,t.W1O)),2&e){const c=t.MAs(2);t.Q6J("ngIf",i.book)("ngIfElse",c)}},directives:[p.O5,p.sg],styles:["p[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),o})()}]}];let z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[r.Bz.forChild(E)],r.Bz]}),o})(),K=(()=>{class o{constructor(){this.authToken="1234567890"}intercept(e,i){const c=e.clone({setHeaders:{Authorization:`Bearer ${this.authToken}`}});return i.handle(c)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac}),o})(),P=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o,bootstrap:[f]}),o.\u0275inj=t.cJS({providers:[{provide:a.TP,useClass:K,multi:!0}],imports:[[p.ez,a.JF,z]]}),o})()}}]);