(self.webpackChunkbook_monkey=self.webpackChunkbook_monkey||[]).push([[811],{6811:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AppModule:()=>C});var o=n(1116),i=n(2693),s=n(1441),r=n(8619);let c=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["bm-root"]],decls:6,vars:0,consts:[[1,"ui","menu"],["routerLink","home","routerLinkActive","active",1,"item"],["routerLink","books","routerLinkActive","active",1,"item"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.TgZ(1,"a",1),r._uU(2,"Home"),r.qZA(),r.TgZ(3,"a",2),r._uU(4,"B\xfccher"),r.qZA(),r.qZA(),r._UZ(5,"router-outlet"))},directives:[s.yS,s.Od,s.lC],styles:[""]}),t})();var u=n(3559),a=n(3835),l=n(4094),p=n(8720),g=n(6599),h=n(4689),b=n(1225),f=n(6998),d=n(9996),m=n(7727);class k{static fromRaw(t){return Object.assign(Object.assign({},t),{published:new Date(t.published)})}}let Z=(()=>{class t{constructor(t){this.http=t,this.api="https://api4.angular-buch.com/secure"}getAll(){return this.http.get(`${this.api}/books`).pipe((0,f.X)(3),(0,d.U)(t=>t.map(t=>k.fromRaw(t))),(0,m.K)(this.errorHandler))}getSingle(t){return this.http.get(`${this.api}/book/${t}`).pipe((0,f.X)(3),(0,d.U)(t=>k.fromRaw(t)),(0,m.K)(this.errorHandler))}remove(t){return this.http.delete(`${this.api}/book/${t}`,{responseType:"text"}).pipe((0,m.K)(this.errorHandler))}getAllSearch(t){return this.http.get(`${this.api}/books/search/${t}`).pipe((0,f.X)(3),(0,d.U)(t=>t.map(t=>k.fromRaw(t))),(0,m.K)(this.errorHandler))}errorHandler(t){return console.error("Fehler aufgetreten!"),(0,b._)(t)}}return t.\u0275fac=function(e){return new(e||t)(r.LFG(i.eN))},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const v=function(t){return["..","books",t]};function A(t,e){if(1&t&&(r.TgZ(0,"a",8),r._uU(1),r.TgZ(2,"p",9),r._uU(3),r.qZA(),r.qZA()),2&t){const t=e.$implicit;r.Q6J("routerLink",r.VKq(3,v,t.isbn)),r.xp6(1),r.hij(" ",t.title," "),r.xp6(2),r.Oqu(t.subtitle)}}function q(t,e){if(1&t&&(r.TgZ(0,"div",6),r.YNc(1,A,4,5,"a",7),r.qZA()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngForOf",t.foundBooks)}}let U=(()=>{class t{constructor(t){this.bs=t,this.keyUp$=new u.xQ,this.isLoading=!1,this.foundBooks=[]}ngOnInit(){this.keyUp$.pipe((0,a.h)(t=>t.length>=3),(0,l.b)(500),(0,p.x)(),(0,g.b)(()=>this.isLoading=!0),(0,h.w)(t=>this.bs.getAllSearch(t)),(0,g.b)(()=>this.isLoading=!1)).subscribe(t=>this.foundBooks=t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Z))},t.\u0275cmp=r.Xpm({type:t,selectors:[["bm-search"]],decls:6,vars:3,consts:[[1,"ui","search"],[1,"ui","icon","input"],["type","text",1,"prompt",3,"keyup"],["input",""],[1,"search","icon"],["class","results transition visible",4,"ngIf"],[1,"results","transition","visible"],["class","result",3,"routerLink",4,"ngFor","ngForOf"],[1,"result",3,"routerLink"],[1,"description"]],template:function(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"input",2,3),r.NdJ("keyup",function(){r.CHM(t);const n=r.MAs(3);return e.keyUp$.next(n.value)}),r.qZA(),r._UZ(4,"i",4),r.qZA(),r.YNc(5,q,2,1,"div",5),r.qZA()}2&t&&(r.ekj("loading",e.isLoading),r.xp6(5),r.Q6J("ngIf",e.foundBooks.length))},directives:[o.O5,o.sg,s.yS],styles:[""]}),t})(),T=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["bm-home"]],decls:10,vars:0,consts:[["routerLink","../books",1,"ui","red","button"],[1,"right","arrow","icon"]],template:function(t,e){1&t&&(r.TgZ(0,"h1"),r._uU(1,"Home"),r.qZA(),r.TgZ(2,"p"),r._uU(3,"Das ist der BookMonkey."),r.qZA(),r.TgZ(4,"a",0),r._uU(5," Buchliste ansehen "),r._UZ(6,"i",1),r.qZA(),r.TgZ(7,"h2"),r._uU(8,"Suche"),r.qZA(),r._UZ(9,"bm-search"))},directives:[s.yS,U],styles:[""]}),t})();function _(t,e){if(1&t&&r._UZ(0,"img",7),2&t){const t=r.oxw(2);r.Q6J("src",t.book.thumbnails[0].url,r.LSH)}}function x(t,e){if(1&t&&(r.TgZ(0,"div",8),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Oqu(t.book.subtitle)}}function w(t,e){1&t&&(r.TgZ(0,"span"),r._uU(1,", "),r.qZA())}function y(t,e){if(1&t&&(r.TgZ(0,"span"),r._uU(1),r.YNc(2,w,2,0,"span",0),r.qZA()),2&t){const t=e.$implicit,n=e.last;r.xp6(1),r.hij(" ",t,""),r.xp6(1),r.Q6J("ngIf",!n)}}function O(t,e){if(1&t&&(r.ynx(0),r.YNc(1,_,1,1,"img",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r._uU(4),r.qZA(),r.YNc(5,x,2,1,"div",4),r.TgZ(6,"div",5),r.YNc(7,y,3,2,"span",6),r._UZ(8,"br"),r._uU(9),r.qZA(),r.qZA(),r.BQk()),2&t){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",t.book.thumbnails&&t.book.thumbnails[0]&&t.book.thumbnails[0].url),r.xp6(3),r.Oqu(t.book.title),r.xp6(1),r.Q6J("ngIf",t.book.subtitle),r.xp6(2),r.Q6J("ngForOf",t.book.authors),r.xp6(2),r.hij(" ISBN ",t.book.isbn," ")}}let I=(()=>{class t{ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["bm-book-list-item"]],inputs:{book:"book"},decls:1,vars:1,consts:[[4,"ngIf"],["class","ui tiny image",3,"src",4,"ngIf"],[1,"content"],[1,"header"],["class","description",4,"ngIf"],[1,"metadata"],[4,"ngFor","ngForOf"],[1,"ui","tiny","image",3,"src"],[1,"description"]],template:function(t,e){1&t&&r.YNc(0,O,10,5,"ng-container",0),2&t&&r.Q6J("ngIf",e.book)},directives:[o.O5,o.sg],styles:[""]}),t})();function J(t,e){if(1&t&&r._UZ(0,"bm-book-list-item",4),2&t){const t=e.$implicit;r.Q6J("book",t)("routerLink",t.isbn)}}function F(t,e){1&t&&(r.TgZ(0,"div",5),r.TgZ(1,"div",6),r._uU(2,"Daten werden geladen..."),r.qZA(),r.qZA())}function Y(t,e){1&t&&(r.TgZ(0,"p"),r._uU(1,"Es wurden noch keine B\xfccher eingetragen."),r.qZA())}function Q(t,e){if(1&t&&(r.TgZ(0,"h3"),r._uU(1),r.qZA()),2&t){const t=r.oxw(2);r.xp6(1),r.Oqu(t.book.subtitle)}}function B(t,e){if(1&t&&(r.ynx(0),r._uU(1),r._UZ(2,"br"),r.BQk()),2&t){const t=e.$implicit;r.xp6(1),r.hij(" ",t,"")}}function N(t,e){1&t&&r._UZ(0,"i",13)}function L(t,e){if(1&t&&(r.TgZ(0,"div",5),r.TgZ(1,"h4"),r._uU(2,"Rating"),r.qZA(),r.YNc(3,N,1,0,"i",12),r.qZA()),2&t){const t=r.oxw(2);r.xp6(3),r.Q6J("ngForOf",t.getRating(t.book.rating))}}function $(t,e){1&t&&r._UZ(0,"img",14),2&t&&r.Q6J("src",e.$implicit.url,r.LSH)}function S(t,e){if(1&t){const t=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"h1"),r._uU(2),r.qZA(),r.YNc(3,Q,2,1,"h3",2),r._UZ(4,"div",3),r.TgZ(5,"div",4),r.TgZ(6,"div",5),r.TgZ(7,"h4"),r._uU(8,"Autoren"),r.qZA(),r.YNc(9,B,3,1,"ng-container",6),r.qZA(),r.TgZ(10,"div",5),r.TgZ(11,"h4"),r._uU(12,"ISBN"),r.qZA(),r._uU(13),r.qZA(),r.TgZ(14,"div",5),r.TgZ(15,"h4"),r._uU(16,"Erschienen"),r.qZA(),r._uU(17),r.qZA(),r.YNc(18,L,4,1,"div",7),r.qZA(),r.TgZ(19,"h4"),r._uU(20,"Beschreibung"),r.qZA(),r.TgZ(21,"p"),r._uU(22),r.qZA(),r.TgZ(23,"div",8),r.YNc(24,$,1,1,"img",9),r.qZA(),r.TgZ(25,"button",10),r.NdJ("click",function(){return r.CHM(t),r.oxw().removeBook()}),r._UZ(26,"i",11),r._uU(27," Buch l\xf6schen "),r.qZA(),r.qZA()}if(2&t){const t=r.oxw();r.xp6(2),r.Oqu(t.book.title),r.xp6(1),r.Q6J("ngIf",t.book.subtitle),r.xp6(6),r.Q6J("ngForOf",t.book.authors),r.xp6(4),r.hij(" ",t.book.isbn," "),r.xp6(4),r.hij(" ",t.book.published," "),r.xp6(1),r.Q6J("ngIf",t.book.rating),r.xp6(4),r.Oqu(t.book.description),r.xp6(2),r.Q6J("ngForOf",t.book.thumbnails)}}function H(t,e){1&t&&r._UZ(0,"div",15)}const j=[{path:"",component:c,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:T},{path:"books",component:(()=>{class t{constructor(t){this.bs=t,this.books=[]}ngOnInit(){this.bs.getAll().subscribe(t=>this.books=t)}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Z))},t.\u0275cmp=r.Xpm({type:t,selectors:[["bm-book-list"]],decls:4,vars:3,consts:[[1,"ui","middle","aligned","selection","divided","list"],["class","item",3,"book","routerLink",4,"ngFor","ngForOf"],["class","ui active dimmer",4,"ngIf"],[4,"ngIf"],[1,"item",3,"book","routerLink"],[1,"ui","active","dimmer"],[1,"ui","large","text","loader"]],template:function(t,e){1&t&&(r.TgZ(0,"div",0),r.YNc(1,J,1,2,"bm-book-list-item",1),r.YNc(2,F,3,0,"div",2),r.YNc(3,Y,2,0,"p",3),r.qZA()),2&t&&(r.xp6(1),r.Q6J("ngForOf",e.books),r.xp6(1),r.Q6J("ngIf",!e.books),r.xp6(1),r.Q6J("ngIf",e.books&&!e.books.length))},directives:[o.sg,o.O5,I,s.rH],styles:[""]}),t})()},{path:"books/:isbn",component:(()=>{class t{constructor(t,e,n){this.bs=t,this.router=e,this.route=n}ngOnInit(){this.bs.getSingle(this.route.snapshot.paramMap.get("isbn")||"").subscribe(t=>this.book=t)}getRating(t){return new Array(t)}removeBook(){this.book&&confirm("Buch wirklich l\xf6schen?")&&this.bs.remove(this.book.isbn).subscribe(t=>this.router.navigate(["../"],{relativeTo:this.route}))}}return t.\u0275fac=function(e){return new(e||t)(r.Y36(Z),r.Y36(s.F0),r.Y36(s.gz))},t.\u0275cmp=r.Xpm({type:t,selectors:[["bm-book-details"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[4,"ngIf"],[1,"ui","divider"],[1,"ui","grid"],[1,"four","wide","column"],[4,"ngFor","ngForOf"],["class","four wide column",4,"ngIf"],[1,"ui","small","images"],[3,"src",4,"ngFor","ngForOf"],[1,"ui","tiny","red","labeled","icon","button",3,"click"],[1,"remove","icon"],["class","yellow star icon",4,"ngFor","ngForOf"],[1,"yellow","star","icon"],[3,"src"],[1,"ui","active","centered","inline","loader"]],template:function(t,e){if(1&t&&(r.YNc(0,S,28,8,"div",0),r.YNc(1,H,1,0,"ng-template",null,1,r.W1O)),2&t){const t=r.MAs(2);r.Q6J("ngIf",e.book)("ngIfElse",t)}},directives:[o.O5,o.sg],styles:["p[_ngcontent-%COMP%]{white-space:pre-wrap}"]}),t})()}]}];let M=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[[s.Bz.forChild(j)],s.Bz]}),t})(),X=(()=>{class t{constructor(){this.authToken="1234567890"}intercept(t,e){const n=t.clone({setHeaders:{Authorization:`Bearer ${this.authToken}`}});return e.handle(n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Yz7({token:t,factory:t.\u0275fac}),t})(),C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t,bootstrap:[c]}),t.\u0275inj=r.cJS({providers:[{provide:i.TP,useClass:X,multi:!0}],imports:[[o.ez,i.JF,M]]}),t})()}}]);